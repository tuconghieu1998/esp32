<main class="content">
    <div class="container-fluid p-0">
        <div class="row">
            <div class="col-md-12 col-xl-12">
                <div class="card mb-3">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Profile Details</h5>
                    </div>
                    <div class="card-body text-center">
                        <img src="/img/avatars/avatar.jpg" alt="Christina Mason" class="img-fluid rounded-circle mb-2"
                            width="128" height="128" />
                        <h5 class="card-title mb-0">Admin</h5>
                        <div class="text-muted mb-2">MRO</div>
                    </div>
                    <hr class="my-0" />
                    <div class="card-body text-center">
                        <button class="btn btn-outline-danger" id="logout">Log out</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
<script>
	document.getElementById("logout").addEventListener("click", () => {
		fetch('/account/logout', { method: 'POST', credentials: 'include' }) // Notify server to destroy session
			.then(() => {
				localStorage.removeItem("pnsmrotoken"); // Remove JWT token
				window.location.href = "/account/login"; // Redirect to login page
			})
			.catch(error => {
				console.error("Logout failed:", error);
				localStorage.removeItem("pnsmrotoken"); // Remove JWT token
				window.location.href = "/account/login"; // Redirect to login page
			}
			);
	});
</script>